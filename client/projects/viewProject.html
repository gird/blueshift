<template name="projectView">
    {{#if subscriptionReady}}
    <h1>
        <a href="{{pathFor 'projects'}}">
             <span class="glyphicon glyphicon-briefcase"></span>&nbsp;Project
        </a>
    </h1>
    <h2>
        {{name}} 
        {{>projectViewButtons}}
    </h2>
    {{> projectViewDetail}}
    {{> projectRelatedLists}}
    {{/if}}
</template>

<template name="projectViewButtons">
    <div class="btn-group" style="margin: 10px 10px 10px;">
        <button type="button" class="btn btn-default edit_project"><span class="glyphicon glyphicon-pencil"></span></button>
        <button type="button" class="btn btn-default delete_project"><span class="glyphicon glyphicon-trash"></span></button>
    </div>
</template>

<template name="projectViewDetail">
    <div class="project">
        <p><strong>Start Date: </strong>{{startDate}}</p>
        <p><strong>End Date: </strong>{{endDate}}</p>
        <p><strong>Situation: </strong>{{situation}}</p>
        <p><strong>Solution: </strong>{{solution}}</p>
        <p><strong>Probability: </strong>{{probability}}</p>
        <p><strong>Company: </strong><a href="{{pathFor 'projectCompany'}}">{{company}}</a></p>
        <p><strong>Rate Book: </strong><a href="{{pathFor 'projectRateBook'}}">{{rateBook}}</a></p>
    </div>
</template>

<!--Start of Lists related to the Project-->

<template name="projectRelatedLists">
    <div class="panel-group" id="accordion">
        {{> projectRelated_projectRoles}} 
        {{> projectRelated_opportunities}}
    </div>
</template>

<template name="projectRelated_projectRoles">
    <div class="panel panel-default">
        <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#projectRoles">
                    Project Roles
                </a>
            </h4>
        <div id="projectRoles" class="panel-collapse collapse in">
            <div class="panel-body">
                {{#if projectRoles.count}}
                <div class="childProjectRoles">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each projectRoles}} 
                                {{> projectRolesListRow}} 
                            {{/each}}
                        </tbody>
                    </table>
                </div>
                {{else}}
                <p>There are currently no Project Roles for this Project.</p>
                {{/if}}
                <button type="button" class="btn btn-default">New</button>
            </div>
        </div>
    </div>
</template>

<template name="projectRolesListRow">
    <tr>
        <td> <a href="{{pathFor 'projectRoleView'}}"> {{role}} </a> 
        </td>
        <td>{{status}}</td>
        <td>{{startDate}}</td>
        <td>{{endDate}}</td>
    </tr>
</template>


<template name="projectRelated_opportunities">
    <div class="panel panel-success">
        <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#opportunities">Related Opportunities</a>
        </h4>
        <div id="opportunities" class="panel-collapse collapse">
            <div class="panel-body">
                {{#if projectOpportunities.count}}
                <div class="relatedOpportunities">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Owner</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each projectOpportunities}} {{> projectOpportunitiesListRow}} {{/each}}
                        </tbody>
                    </table>
                </div>
                {{else}}
                <p><strong> Somethings wrong :\ There are no opportunities for this project and there should be.</strong>
                </p>
                {{/if}}
            </div>
        </div>
    </div>
</template>

<template name="projectOpportunitiesListRow">
    <tr>
        <td> <a href="{{pathFor 'opportunityView'}}"> {{name}} </a> 
        </td>
        <td>{{owner_id}}</td>
    </tr>
</template>
<!--End of Lists related to Project-->