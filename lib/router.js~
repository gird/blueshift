Router.configure({
  layoutTemplate: 'layout',
  loading: ('loading'),
  waitOn: function() { 
    return [Meteor.subscribe('Projects')]
  }
});

Router.map(function() {
  this.route('home', {path: '/'});
  this.route('projects', {path: '/projects'});
  this.route('opportunities', {path: '/opportunities'});
  this.route('companies', {path: '/companies'});
  this.route('projectPage', {
    path: '/projects/:_id',
    waitOn: function() { return Meteor.subscribe('Projects', this.params._id); },
    data: function() { return Projects.findOne(this.params._id); }
  });
});

Router.onBeforeAction('loading');
